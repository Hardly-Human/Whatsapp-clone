{"version":3,"sources":["firebase.js","components/Login.js","components/SidebarListItem.js","components/SidebarList.js","components/Sidebar.js","hooks/useRooms.js","hooks/useUsers.js","hooks/useChats.js","components/AudioPlayer.js","components/ChatMessages.js","components/recordAudio.js","components/ChatFooter.js","components/MediaPreview.js","components/Chat.js","hooks/useChatMessages.js","hooks/useRoom.js","App.js","hooks/useWindowSize.js","hooks/useAuthUser.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","provider","GoogleAuthProvider","storage","ref","audioStorage","createTimestamp","FieldValue","serverTimestamp","database","ServerValue","TIMESTAMP","Login","className","src","alt","Button","onClick","signInWithRedirect","SidebarListItem","item","to","id","Avatar","style","width","height","photoURL","name","SidebarList","title","data","length","map","SearchOutlined","CancelOutlined","CircularProgress","Sidebar","Nav","user","page","rooms","useCollection","collection","orderBy","snapshot","docs","doc","userID","useRooms","users","forEach","uid","push","useUsers","chats","useChats","React","useState","searchResults","setSearchResults","menu","setMenu","event","a","preventDefault","query","target","elements","search","value","where","get","userSnapshot","roomSnapshot","userResults","roomResults","isMobile","NavLink","props","activeClass","children","minHeight","displayName","IconButton","signOut","window","location","href","ExitToApp","onSubmit","placeholder","type","activeClassName","Home","Message","PeopleAlt","path","roomName","prompt","trim","add","timestamp","Add","AudioPlayer","sender","audioUrl","setAudioId","audioId","isPlaying","setPlaying","isMediaLoaded","setMediaLoaded","isLoaded","setLoaded","isMetadataLoaded","setMetadataLoaded","sliderValue","setSliderValue","duration","setDuration","totalDuration","useRef","audio","Audio","interval","isUploading","formatTime","time","minutes","Math","floor","seconds","updateSlider","current","currentTime","useEffect","load","media","Promise","resolve","onloadedmetadata","Number","MAX_SAFE_INTEGER","ontimeupdate","then","addEventListener","clearInterval","pause","PauseRounded","PlayArrowRounded","play","setInterval","min","max","onChange","seekTo","ChatMessages","messages","roomId","message","isSender","imageUrl","audioName","recordAudio","navigator","mediaDevices","getUserMedia","stream","mediaRecorder","MediaRecorder","audioChunks","start","stop","uuid","audioFile","File","URL","createObjectURL","ChatFooter","input","sendMessage","image","room","isRecording","setRecording","timerInterval","recordingEl","record","inputRef","focus","pad","String","stopRecording","opacity","sendAudio","set","Date","toUTCString","child","put","getDownloadURL","url","update","now","setTime","timeElapsed","totalSeconds","parseInt","startTimer","btnIcons","Send","color","MicRounded","canRecord","onKeyPress","htmlFor","display","accept","capture","files","CancelRounded","CheckCircleRounded","MediaPreview","closePreview","CloseRounded","Chat","setImage","setInput","isDeleting","setDeleting","openMenu","setOpenMenu","setSrc","useParams","history","useHistory","useChatMessages","userId","isUserRoom","includes","replace","useDocument","useRoom","imageName","newMessage","Compressor","quality","maxWidth","success","result","roomRef","roomMessages","audioFiles","imageFiles","all","delete","console","error","goBack","ArrowBack","file","reader","FileReader","readAsDataURL","onload","cursor","AddPhotoAlternate","currentTarget","MoreVert","Menu","anchorEl","open","Boolean","onClose","keepMounted","MenuItem","App","undefined","windowSize","setWindowSize","handleResize","innerHeight","innerWidth","currentRatio","ratio","transform","removeEventListener","useWindowSize","useAuthState","exists","useAuthUser","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.56e7269b.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\nimport \"firebase/database\";\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyC09rBy9aYiJsBt67zG_JCcEpMAMEgOGEw\",\n\tauthDomain: \"whatsapp-clone-e7410.firebaseapp.com\",\n\tprojectId: \"whatsapp-clone-e7410\",\n\tstorageBucket: \"whatsapp-clone-e7410.appspot.com\",\n\tmessagingSenderId: \"491015387626\",\n\tappId: \"1:491015387626:web:56b9f443506e11c98d1a93\",\n};\n// Initialize Firebase\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\n\nconst db = firebaseApp.firestore();\nconst auth = firebaseApp.auth();\nconst provider = new firebase.auth.GoogleAuthProvider();\nconst storage = firebase.storage().ref(\"images\");\nconst audioStorage = firebase.storage().ref(\"audios\");\nconst createTimestamp = firebase.firestore.FieldValue.serverTimestamp;\nconst serverTimestamp = firebase.database.ServerValue.TIMESTAMP;\n\nexport {\n\tdb,\n\tauth,\n\tprovider,\n\tstorage,\n\taudioStorage,\n\tcreateTimestamp,\n\tserverTimestamp,\n};\n","import { Button } from \"@material-ui/core\";\nimport \"./Login.css\";\nimport { auth, provider } from \"../firebase\";\n\nexport default function Login() {\n  function login() {\n    auth.signInWithRedirect(provider);\n  }\n\n  return (\n    <div className=\"app\">\n      <div className=\"login\">\n        <div className=\"login__container\">\n          <img src=\"./login-logo.png\" alt=\"Logo\" />\n          <div className=\"login__text\">\n            <h1>Sign in to WhatsApp</h1>\n          </div>\n          <Button onClick={login}>Sign in with Google</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Avatar } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n\nexport default function SidebarListItem({ item }) {\n  return (\n    <Link className=\"link\" to={`/room/${item.id}`}>\n      <div className=\"sidebar__chat\">\n        <div className=\"avatar__container\">\n          <Avatar\n            style={{\n              width: 45,\n              height: 45,\n            }}\n            src={\n              item.photoURL ||\n              `https://avatars.dicebear.com/api/human/${item.id}.svg`\n            }\n          />\n        </div>\n        <div className=\"sidebar__chat--info\">\n          <h2>{item.name}</h2>\n        </div>\n      </div>\n    </Link>\n  );\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport { CancelOutlined, SearchOutlined } from \"@material-ui/icons\";\nimport SidebarListItem from \"./SidebarListItem\";\nimport \"./SidebarList.css\";\n\nexport default function SidebarList({ title, data }) {\n  if (!data) {\n    return (\n      <div className=\"loader__container sidebar__loader\">\n        <CircularProgress />\n      </div>\n    );\n  }\n\n  if (!data.length && title === \"Search Results\") {\n    return (\n      <div className=\"no-result\">\n        <div>\n          <SearchOutlined />\n          <div className=\"cancel-root\">\n            <CancelOutlined />\n          </div>\n        </div>\n        <h2>No {title}</h2>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"sidebar__chat--container\">\n      <h2>{title}</h2>\n      {data.map((item) => (\n        <SidebarListItem key={item.id} item={item} />\n      ))}\n    </div>\n  );\n}\n","import { Avatar, IconButton } from '@material-ui/core';\nimport {\n\tAdd,\n\tExitToApp,\n\tHome,\n\tMessage,\n\tPeopleAlt,\n\tSearchOutlined,\n} from '@material-ui/icons';\nimport React from 'react';\nimport SidebarList from './SidebarList';\nimport { auth, createTimestamp, db } from '../firebase';\nimport './Sidebar.css';\nimport { NavLink, Switch, Route } from 'react-router-dom';\nimport useRooms from '../hooks/useRooms';\nimport useUsers from '../hooks/useUsers';\nimport useChats from '../hooks/useChats';\n\nexport default function Sidebar({ user, page }) {\n\tconst rooms = useRooms();\n\tconst users = useUsers(user);\n\tconst chats = useChats(user);\n\n\tconst [searchResults, setSearchResults] = React.useState([]);\n\tconst [menu, setMenu] = React.useState(1);\n\n\tfunction signOut() {\n\t\tauth.signOut();\n\t\twindow.location.href = 'https://www.rehan.tech/Whatsapp-clone/';\n\t}\n\n\tfunction createRoom() {\n\t\tconst roomName = prompt('Type the name of your room');\n\n\t\tif (roomName.trim()) {\n\t\t\tdb.collection('rooms').add({\n\t\t\t\tname: roomName,\n\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function searchUsersAndRooms(event) {\n\t\tevent.preventDefault();\n\t\tconst query = event.target.elements.search.value;\n\t\tconst userSnapshot = await db\n\t\t\t.collection('users')\n\t\t\t.where('name', '==', query)\n\t\t\t.get();\n\t\tconst roomSnapshot = await db\n\t\t\t.collection('rooms')\n\t\t\t.where('name', '==', query)\n\t\t\t.get();\n\t\tconst userResults = userSnapshot.docs.map((doc) => ({\n\t\t\tid: doc.id,\n\t\t\t...doc.data(),\n\t\t}));\n\t\tconst roomResults = roomSnapshot.docs.map((doc) => ({\n\t\t\tid: doc.id,\n\t\t\t...doc.data(),\n\t\t}));\n\t\tconst searchResults = [...userResults, ...roomResults];\n\t\tsetMenu(4);\n\t\tsetSearchResults(searchResults);\n\t}\n\n\tlet Nav;\n\tif (page.isMobile) {\n\t\tNav = NavLink;\n\t} else {\n\t\tNav = (props) => (\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\tprops.activeClass ? 'sidebar__menu--selected' : ''\n\t\t\t\t}`}\n\t\t\t\tonClick={props.onClick}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"sidebar\"\n\t\t\tstyle={{\n\t\t\t\tminHeight: page.isMobile ? page.height : 'auto',\n\t\t\t}}\n\t\t>\n\t\t\t<div className=\"sidebar__header\">\n\t\t\t\t<div className=\"sidebar__header--left\">\n\t\t\t\t\t<Avatar src={user?.photoURL} />\n\t\t\t\t\t<h4>{user?.displayName}</h4>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sidebar__header--right\">\n\t\t\t\t\t<IconButton onClick={signOut}>\n\t\t\t\t\t\t<ExitToApp />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"sidebar__search\">\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={searchUsersAndRooms}\n\t\t\t\t\tclassName=\"sidebar__search--container\"\n\t\t\t\t>\n\t\t\t\t\t<SearchOutlined />\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Search for users or rooms\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tid=\"search\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t<div className=\"sidebar__menu\">\n\t\t\t\t<Nav\n\t\t\t\t\tto=\"/chats\"\n\t\t\t\t\tactiveClassName=\"sidebar__menu--selected\"\n\t\t\t\t\tonClick={() => setMenu(1)}\n\t\t\t\t\tactiveClass={menu === 1}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sidebar__menu--home\">\n\t\t\t\t\t\t<Home />\n\t\t\t\t\t\t<div className=\"sidebar__menu--line\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Nav>\n\t\t\t\t<Nav\n\t\t\t\t\tto=\"/rooms\"\n\t\t\t\t\tactiveClassName=\"sidebar__menu--selected\"\n\t\t\t\t\tonClick={() => setMenu(2)}\n\t\t\t\t\tactiveClass={menu === 2}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sidebar__menu--rooms\">\n\t\t\t\t\t\t<Message />\n\t\t\t\t\t\t<div className=\"sidebar__menu--line\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Nav>\n\t\t\t\t<Nav\n\t\t\t\t\tto=\"/users\"\n\t\t\t\t\tactiveClassName=\"sidebar__menu--selected\"\n\t\t\t\t\tonClick={() => setMenu(3)}\n\t\t\t\t\tactiveClass={menu === 3}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sidebar__menu--users\">\n\t\t\t\t\t\t<PeopleAlt />\n\t\t\t\t\t\t<div className=\"sidebar__menu--line\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Nav>\n\t\t\t</div>\n\n\t\t\t{page.isMobile ? (\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/chats\">\n\t\t\t\t\t\t<SidebarList title=\"Chats\" data={chats} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/rooms\">\n\t\t\t\t\t\t<SidebarList title=\"Rooms\" data={rooms} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/users\">\n\t\t\t\t\t\t<SidebarList title=\"Users\" data={users} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/search\">\n\t\t\t\t\t\t<SidebarList\n\t\t\t\t\t\t\ttitle=\"Search Results\"\n\t\t\t\t\t\t\tdata={searchResults}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t) : menu === 1 ? (\n\t\t\t\t<SidebarList title=\"Chats\" data={chats} />\n\t\t\t) : menu === 2 ? (\n\t\t\t\t<SidebarList title=\"Rooms\" data={rooms} />\n\t\t\t) : menu === 3 ? (\n\t\t\t\t<SidebarList title=\"Users\" data={users} />\n\t\t\t) : menu === 4 ? (\n\t\t\t\t<SidebarList title=\"Search Results\" data={searchResults} />\n\t\t\t) : null}\n\n\t\t\t<div className=\"sidebar__chat--addRoom\">\n\t\t\t\t<IconButton onClick={createRoom}>\n\t\t\t\t\t<Add />\n\t\t\t\t</IconButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useRooms() {\n  const [snapshot] = useCollection(\n    db.collection(\"rooms\").orderBy(\"timestamp\", \"desc\")\n  );\n\n  const rooms = snapshot?.docs.map((doc) => ({\n    id: doc.id,\n    userID: doc.id,\n    ...doc.data(),\n  }));\n\n  return rooms;\n}\n","import { db } from \"../firebase\";\nimport { useCollection } from \"react-firebase-hooks/firestore\";\n\nexport default function useUsers(user) {\n  const [snapshot] = useCollection(\n    db.collection(\"users\").orderBy(\"timestamp\", \"desc\")\n  );\n\n  const users = [];\n\n  if (user) {\n    snapshot?.docs.forEach((doc) => {\n      const id =\n        doc.id > user.uid ? `${doc.id}${user.uid}` : `${user.uid}${doc.id}`;\n\n      if (doc.id !== user.uid) {\n        users.push({\n          id,\n          userID: doc.id,\n          ...doc.data(),\n        });\n      }\n    });\n  }\n\n  return users;\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useChats(user) {\n  const [snapshot] = useCollection(\n    user\n      ? db\n          .collection(\"users\")\n          .doc(user.uid)\n          .collection(\"chats\")\n          .orderBy(\"timestamp\", \"desc\")\n      : null\n  );\n\n  const chats = snapshot?.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  }));\n\n  return chats;\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport { PauseRounded, PlayArrowRounded } from \"@material-ui/icons\";\nimport React from \"react\";\nimport \"./AudioPlayer.css\";\n\nexport default function AudioPlayer({\n  sender,\n  audioUrl,\n  id,\n  setAudioId,\n  audioId,\n}) {\n  const [isPlaying, setPlaying] = React.useState(false);\n  const [isMediaLoaded, setMediaLoaded] = React.useState(false);\n  const [isLoaded, setLoaded] = React.useState(false);\n  const [isMetadataLoaded, setMetadataLoaded] = React.useState(false);\n  const [sliderValue, setSliderValue] = React.useState(0);\n  const [duration, setDuration] = React.useState(\"\");\n\n  const totalDuration = React.useRef(\"\");\n  const audio = React.useRef(new Audio(audioUrl));\n  const interval = React.useRef();\n  const isUploading = React.useRef(audioUrl === \"uploading\");\n\n  React.useEffect(() => {\n    if (isUploading.current && audioUrl !== \"uploading\") {\n      audio.current = new Audio(audioUrl);\n      audio.current.load();\n      setLoaded(true);\n    } else if (isUploading.current === false) {\n      setLoaded(true);\n    }\n  }, [audioUrl]);\n\n  function getAudioDuration(media) {\n    return new Promise((resolve) => {\n      media.onloadedmetadata = () => {\n        media.currentTime = Number.MAX_SAFE_INTEGER;\n\n        media.ontimeupdate = () => {\n          media.ontimeupdate = () => {};\n          media.currentTime = 0.1;\n          resolve(media.duration);\n        };\n      };\n    });\n  }\n\n  React.useEffect(() => {\n    if (isLoaded) {\n      getAudioDuration(audio.current).then(() => {\n        setMetadataLoaded(true);\n      });\n    }\n  }, [isLoaded]);\n\n  React.useEffect(() => {\n    if (isMetadataLoaded) {\n      audio.current.addEventListener(\"canplaythrough\", () => {\n        if (!totalDuration.current) {\n          setMediaLoaded(true);\n          const time = formatTime(audio.current.duration);\n          totalDuration.current = time;\n          setDuration(totalDuration.current);\n        }\n      });\n\n      audio.current.addEventListener(\"ended\", () => {\n        clearInterval(interval.current);\n        setDuration(totalDuration.current);\n        setSliderValue(0);\n        setPlaying(false);\n      });\n    }\n  }, [isMetadataLoaded]);\n\n  function formatTime(time) {\n    let minutes = Math.floor(time / 60);\n    let seconds = Math.floor(time - minutes * 60);\n\n    if (minutes < 10) {\n      minutes = `0${minutes}`;\n    }\n    if (seconds < 10) {\n      seconds = `0${seconds}`;\n    }\n\n    return `${minutes}:${seconds}`;\n  }\n\n  function playAudio() {\n    setPlaying(true);\n    audio.current.play();\n    if (audioId !== id) {\n      setAudioId(id);\n    }\n    interval.current = setInterval(updateSlider, 100);\n  }\n\n  function updateSlider() {\n    let sliderPosition = 0;\n\n    const { currentTime, duration } = audio.current;\n    if (typeof duration === \"number\") {\n      sliderPosition = currentTime * (100 / duration);\n      setSliderValue(sliderPosition);\n      const time = formatTime(currentTime);\n      setDuration(time);\n    }\n  }\n\n  function stopAudio() {\n    audio.current.pause();\n    clearInterval(interval.current);\n    setPlaying(false);\n    setDuration(totalDuration.current);\n  }\n\n  function scrubAudio(event) {\n    const value = event.target.value;\n    const { duration } = audio.current;\n\n    if (isMediaLoaded) {\n      const seekTo = duration * (value / 100);\n      audio.current.currentTime = seekTo;\n      setSliderValue(value);\n    }\n  }\n\n  React.useEffect(() => {\n    if (audioId !== id) {\n      audio.current.pause();\n      setPlaying(false);\n    }\n  }, [audioId, id]);\n\n  return (\n    <>\n      <div className={`audioplayer ${sender ? \"\" : \"audioplayer__alt\"}`}>\n        {!isMediaLoaded ? (\n          <CircularProgress />\n        ) : isPlaying ? (\n          <PauseRounded onClick={stopAudio} className=\"pause\" />\n        ) : !isPlaying ? (\n          <PlayArrowRounded onClick={playAudio} />\n        ) : null}\n        <div>\n          <span\n            style={{ width: `${sliderValue}%` }}\n            className=\"audioplayer__slider--played\"\n          />\n          <input\n            type=\"range\"\n            min=\"1\"\n            max=\"100\"\n            value={sliderValue}\n            onChange={scrubAudio}\n            className=\"audioplayer__slider\"\n          />\n        </div>\n      </div>\n      <span className=\"chat__timestamp audioplayer__time\">{duration}</span>\n    </>\n  );\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport AudioPlayer from \"./AudioPlayer\";\n\nexport default function ChatMessages({\n  messages,\n  user,\n  roomId,\n  audioId,\n  setAudioId,\n}) {\n  if (!messages) return null;\n\n  return messages.map((message) => {\n    const isSender = message.uid === user.uid;\n\n    return (\n      <div\n        key={message.id}\n        className={`chat__message ${isSender ? \"chat__message--sender\" : \"\"}`}\n      >\n        <span className=\"chat__name\">{message.name}</span>\n\n        {message.imageUrl === \"uploading\" ? (\n          <div className=\"image-container\">\n            <div className=\"image__container--loader\">\n              <CircularProgress\n                style={{\n                  width: 40,\n                  height: 40,\n                }}\n              />\n            </div>\n          </div>\n        ) : message.imageUrl ? (\n          <div className=\"image-container\">\n            <img src={message.imageUrl} alt={message.name} />\n          </div>\n        ) : null}\n\n        {message.audioName ? (\n          <AudioPlayer\n            sender={isSender}\n            roomId={roomId}\n            id={message.id}\n            audioUrl={message.audioUrl}\n            audioId={audioId}\n            setAudioId={setAudioId}\n          />\n        ) : (\n          <span className=\"chat__message--message\">{message.message}</span>\n        )}\n\n        <span className=\"chat__timestamp\">{message.time}</span>\n      </div>\n    );\n  });\n}\n","import { v4 as uuid } from \"uuid\";\n\nexport default function recordAudio() {\n  return new Promise((resolve) => {\n    navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\n      const mediaRecorder = new MediaRecorder(stream);\n      const audioChunks = [];\n\n      mediaRecorder.addEventListener(\"dataavailable\", (event) => {\n        audioChunks.push(event.data);\n      });\n\n      function start() {\n        mediaRecorder.start();\n      }\n\n      function stop() {\n        return new Promise((resolve) => {\n          mediaRecorder.addEventListener(\"stop\", () => {\n            const audioName = uuid();\n            const audioFile = new File(audioChunks, audioName, {\n              type: \"audio/mpeg\",\n            });\n            const audioUrl = URL.createObjectURL(audioFile);\n            const audio = new Audio(audioUrl);\n            function play() {\n              audio.play();\n            }\n\n            resolve({ audioFile, audioUrl, play, audioName });\n          });\n\n          mediaRecorder.stop();\n        });\n      }\n\n      resolve({ start, stop });\n    });\n  });\n}\n","import {\n  CancelRounded,\n  CheckCircleRounded,\n  MicRounded,\n  Send,\n} from \"@material-ui/icons\";\nimport React from \"react\";\nimport { createTimestamp, db, audioStorage } from \"../firebase\";\nimport { v4 as uuid } from \"uuid\";\nimport \"./ChatFooter.css\";\nimport recordAudio from \"./recordAudio\";\n\nexport default function ChatFooter({\n  input,\n  onChange,\n  sendMessage,\n  image,\n  user,\n  room,\n  roomId,\n  setAudioId,\n}) {\n  const [isRecording, setRecording] = React.useState(false);\n  const [duration, setDuration] = React.useState(\"00:00\");\n\n  const timerInterval = React.useRef();\n  const recordingEl = React.useRef();\n  const record = React.useRef();\n  const inputRef = React.useRef();\n\n  async function startRecording(event) {\n    event.preventDefault();\n    record.current = await recordAudio();\n    inputRef.current.focus();\n    inputRef.current.style.width = \"calc(100% - 56px)\";\n    setRecording(true);\n    setAudioId(\"\");\n  }\n\n  React.useEffect(() => {\n    if (isRecording) {\n      recordingEl.current.style.opacity = \"1\";\n      startTimer();\n      record.current.start();\n    }\n\n    function startTimer() {\n      const start = Date.now();\n      timerInterval.current = setInterval(setTime, 100);\n\n      function setTime() {\n        const timeElapsed = Date.now() - start;\n        const totalSeconds = Math.floor(timeElapsed / 1000);\n        const minutes = pad(parseInt(totalSeconds / 60));\n        const seconds = pad(parseInt(totalSeconds % 60));\n        const duration = `${minutes}:${seconds}`;\n        setDuration(duration);\n      }\n    }\n  }, [isRecording]);\n\n  function pad(value) {\n    return String(value).length < 2 ? `0${value}` : value;\n  }\n\n  async function stopRecording() {\n    inputRef.current.focus();\n    clearInterval(timerInterval.current);\n    const audio = record.current.stop();\n    recordingEl.current.style.opacity = \"0\";\n    setRecording(false);\n    inputRef.current.style.width = \"calc(100% - 112px)\";\n    setDuration(\"00:00\");\n    return audio;\n  }\n\n  async function finishRecording() {\n    const audio = await stopRecording();\n    const { audioFile, audioName } = await audio;\n    sendAudio(audioFile, audioName);\n  }\n\n  async function sendAudio(audioFile, audioName) {\n    db.collection(\"users\")\n      .doc(user.uid)\n      .collection(\"chats\")\n      .doc(roomId)\n      .set({\n        name: room.name,\n        photoURL: room.photoURL || null,\n        timestamp: createTimestamp(),\n      });\n\n    const doc = await db\n      .collection(\"rooms\")\n      .doc(roomId)\n      .collection(\"messages\")\n      .add({\n        name: user.displayName,\n        uid: user.uid,\n        timestamp: createTimestamp(),\n        time: new Date().toUTCString(),\n        audioUrl: \"uploading\",\n        audioName,\n      });\n\n    await audioStorage.child(audioName).put(audioFile);\n    const url = await audioStorage.child(audioName).getDownloadURL();\n    db.collection(\"rooms\")\n      .doc(roomId)\n      .collection(\"messages\")\n      .doc(doc.id)\n      .update({\n        audioUrl: url,\n      });\n  }\n\n  function audioInputChange(event) {\n    const audioFile = event.target.files[0];\n\n    if (audioFile) {\n      setAudioId(\"\");\n      sendAudio(audioFile, uuid());\n    }\n  }\n\n  const btnIcons = (\n    <>\n      <Send\n        style={{\n          width: 20,\n          height: 20,\n          color: \"white\",\n        }}\n      />\n      <MicRounded\n        style={{\n          width: 24,\n          height: 24,\n          color: \"white\",\n        }}\n      />\n    </>\n  );\n\n  const canRecord = navigator.mediaDevices.getUserMedia && window.MediaRecorder;\n\n  return (\n    <div className=\"chat__footer\">\n      <form>\n        <input\n          ref={inputRef}\n          value={input}\n          onChange={!isRecording ? onChange : null}\n          onKeyPress={isRecording ? () => false : null}\n          placeholder=\"Type a message\"\n        />\n\n        {canRecord ? (\n          <button\n            onClick={\n              input.trim() || (input === \"\" && image)\n                ? sendMessage\n                : startRecording\n            }\n            type=\"submit\"\n            className=\"send__btn\"\n          >\n            {btnIcons}\n          </button>\n        ) : (\n          <>\n            <label htmlFor=\"capture\" className=\"send__btn\">\n              {btnIcons}\n            </label>\n            <input\n              style={{ display: \"none\" }}\n              type=\"file\"\n              id=\"capture\"\n              accept=\"audio/*\"\n              capture\n              onChange={audioInputChange}\n            />\n          </>\n        )}\n      </form>\n\n      {isRecording && (\n        <div ref={recordingEl} className=\"record\">\n          <CancelRounded\n            style={{\n              width: 30,\n              height: 30,\n              color: \"#f20519\",\n            }}\n            onClick={stopRecording}\n          />\n          <div>\n            <div className=\"record__redcircle\" />\n            <div className=\"record__duration\">{duration}</div>\n          </div>\n          <CheckCircleRounded\n            style={{\n              width: 30,\n              height: 30,\n              color: \"#41bf49\",\n            }}\n            onClick={finishRecording}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","import \"./MediaPreview.css\";\nimport { CloseRounded } from \"@material-ui/icons\";\n\nexport default function MediaPreview({ src, closePreview }) {\n  if (!src) return null;\n\n  return (\n    <div className=\"mediaPreview\">\n      <CloseRounded onClick={closePreview} />\n      <img src={src} alt=\"Preview\" />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport \"./Chat.css\";\nimport useRoom from \"../hooks/useRoom\";\nimport ChatMessages from \"./ChatMessages\";\nimport ChatFooter from \"./ChatFooter\";\nimport MediaPreview from \"./MediaPreview\";\nimport Compressor from \"compressorjs\";\nimport {\n  Avatar,\n  CircularProgress,\n  IconButton,\n  Menu,\n  MenuItem,\n} from \"@material-ui/core\";\nimport { AddPhotoAlternate, ArrowBack, MoreVert } from \"@material-ui/icons\";\nimport { v4 as uuid } from \"uuid\";\nimport { audioStorage, createTimestamp, db, storage } from \"../firebase\";\nimport useChatMessages from \"../hooks/useChatMessages\";\n\nexport default function Chat({ user, page }) {\n  const [image, setImage] = React.useState(null);\n  const [input, setInput] = React.useState(\"\");\n  const [isDeleting, setDeleting] = React.useState(false);\n  const [openMenu, setOpenMenu] = React.useState(null);\n  const [src, setSrc] = React.useState(\"\");\n  const [audioId, setAudioId] = React.useState(\"\");\n\n  const { roomId } = useParams();\n  const history = useHistory();\n  const messages = useChatMessages(roomId);\n  const room = useRoom(roomId, user.uid);\n\n  function onChange(event) {\n    setInput(event.target.value);\n  }\n\n  async function sendMessage(event) {\n    event.preventDefault();\n\n    if (input.trim() || (input === \"\" && image)) {\n      setInput(\"\");\n      if (image) {\n        closePreview();\n      }\n      const imageName = uuid();\n      const newMessage = image\n        ? {\n            name: user.displayName,\n            message: input,\n            uid: user.uid,\n            timestamp: createTimestamp(),\n            time: new Date().toUTCString(),\n            imageUrl: \"uploading\",\n            imageName,\n          }\n        : {\n            name: user.displayName,\n            message: input,\n            uid: user.uid,\n            timestamp: createTimestamp(),\n            time: new Date().toUTCString(),\n          };\n\n      db.collection(\"users\")\n        .doc(user.uid)\n        .collection(\"chats\")\n        .doc(roomId)\n        .set({\n          name: room.name,\n          photoURL: room.photoURL || null,\n          timestamp: createTimestamp(),\n        });\n\n      const doc = await db\n        .collection(\"rooms\")\n        .doc(roomId)\n        .collection(\"messages\")\n        .add(newMessage);\n\n      if (image) {\n        new Compressor(image, {\n          quality: 0.8,\n          maxWidth: 1920,\n          async success(result) {\n            setSrc(\"\");\n            setImage(null);\n            await storage.child(imageName).put(result);\n            const url = await storage.child(imageName).getDownloadURL();\n            db.collection(\"rooms\")\n              .doc(roomId)\n              .collection(\"messages\")\n              .doc(doc.id)\n              .update({\n                imageUrl: url,\n              });\n          },\n        });\n      }\n    }\n  }\n\n  function showPreview(event) {\n    const file = event.target.files[0];\n\n    if (file) {\n      setImage(file);\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        setSrc(reader.result);\n      };\n    }\n  }\n\n  function closePreview() {\n    setSrc(\"\");\n    setImage(null);\n  }\n\n  async function deleteRoom() {\n    setOpenMenu(false);\n    setDeleting(true);\n\n    try {\n      const roomRef = db.collection(\"rooms\").doc(roomId);\n      const roomMessages = await roomRef.collection(\"messages\").get();\n      const audioFiles = [];\n      const imageFiles = [];\n      roomMessages.docs.forEach((doc) => {\n        if (doc.data().audioName) {\n          audioFiles.push(doc.data().audioName);\n        } else if (doc.data().imageName) {\n          imageFiles.push(doc.data().imageName);\n        }\n      });\n\n      await Promise.all([\n        ...roomMessages.docs.map((doc) => doc.ref.delete()),\n        ...imageFiles.map((image) => storage.child(image).delete()),\n        ...audioFiles.map((audio) => audioStorage.child(audio).delete()),\n        db\n          .collection(\"users\")\n          .doc(user.uid)\n          .collection(\"chats\")\n          .doc(roomId)\n          .delete(),\n        roomRef.delete(),\n      ]);\n    } catch (error) {\n      console.error(\"Error deleting room: \", error.message);\n    } finally {\n      setDeleting(false);\n      page.isMobile ? history.goBack() : history.replace(\"/chats\");\n    }\n  }\n\n  return (\n    <div className=\"chat\">\n      <div style={{ height: page.height }} className=\"chat__background\" />\n\n      <div className=\"chat__header\">\n        {page.isMobile && (\n          <IconButton onClick={history.goBack}>\n            <ArrowBack />\n          </IconButton>\n        )}\n\n        <div className=\"avatar__container\">\n          <Avatar src={room?.photoURL} />\n        </div>\n\n        <div className=\"chat__header--info\">\n          <h3 style={{ width: page.isMobile && page.width - 165 }}>\n            {room?.name}\n          </h3>\n        </div>\n\n        <div className=\"chat__header--right\">\n          <input\n            id=\"image\"\n            style={{ display: \"none\" }}\n            accept=\"image/*\"\n            type=\"file\"\n            onChange={showPreview}\n          />\n          <IconButton>\n            <label style={{ cursor: \"pointer\", height: 24 }} htmlFor=\"image\">\n              <AddPhotoAlternate />\n            </label>\n          </IconButton>\n          <IconButton onClick={(event) => setOpenMenu(event.currentTarget)}>\n            <MoreVert />\n          </IconButton>\n          <Menu\n            id=\"menu\"\n            anchorEl={openMenu}\n            open={Boolean(openMenu)}\n            onClose={() => setOpenMenu(null)}\n            keepMounted\n          >\n            <MenuItem onClick={deleteRoom}>Delete Room</MenuItem>\n          </Menu>\n        </div>\n      </div>\n\n      <div className=\"chat__body--container\">\n        <div className=\"chat__body\" style={{ height: page.height - 68 }}>\n          <ChatMessages\n            messages={messages}\n            user={user}\n            roomId={roomId}\n            audioId={audioId}\n            setAudioId={setAudioId}\n          />\n        </div>\n      </div>\n\n      <MediaPreview src={src} closePreview={closePreview} />\n\n      <ChatFooter\n        input={input}\n        onChange={onChange}\n        sendMessage={sendMessage}\n        image={image}\n        user={user}\n        room={room}\n        roomId={roomId}\n        setAudioId={setAudioId}\n      />\n\n      {isDeleting && (\n        <div className=\"chat__deleting\">\n          <CircularProgress />\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useChatMessages(roomId) {\n  const [snapshot] = useCollection(\n    roomId\n      ? db\n          .collection(\"rooms\")\n          .doc(roomId)\n          .collection(\"messages\")\n          .orderBy(\"timestamp\", \"asc\")\n      : null\n  );\n\n  const messages = snapshot?.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  }));\n\n  return messages;\n}\n","import { useDocument } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useRoom(roomId, userId) {\n  const isUserRoom = roomId.includes(userId);\n\n  const doc = isUserRoom ? roomId?.replace(userId, \"\") : roomId;\n\n  const [snapshot] = useDocument(\n    db.collection(isUserRoom ? \"users\" : \"rooms\").doc(doc)\n  );\n\n  if (!snapshot) return null;\n\n  return {\n    id: snapshot.id,\n    photoURL:\n      snapshot.photoURL ||\n      `https://avatars.dicebear.com/api/human/${snapshot.id}.svg`,\n    ...snapshot.data(),\n  };\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Login from \"./components/Login\";\nimport Sidebar from \"./components/Sidebar\";\nimport Chat from \"./components/Chat\";\nimport useWindowSize from \"./hooks/useWindowSize\";\nimport useAuthUser from \"./hooks/useAuthUser\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport default function App() {\n  const page = useWindowSize();\n  const user = useAuthUser();\n\n  if (!user) {\n    return <Login />;\n  }\n\n  return (\n    <div className=\"app\" style={{ ...page }}>\n      <Redirect to={page.isMobile ? \"/chats\" : \"/\"} />\n      <div className=\"app__body\">\n        <Sidebar user={user} page={page} />\n        <Route path=\"/room/:roomId\">\n          <Chat user={user} page={page} />\n        </Route>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = React.useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  React.useEffect(() => {\n    function handleResize() {\n      if (window.innerHeight > 768 && window.innerWidth > 1366) {\n        const currentRatio = window.innerHeight / window.innerWidth;\n        const ratio = 768 / 1366;\n        if (ratio < currentRatio) {\n          setWindowSize({\n            width: 1366,\n            height: window.innerHeight * (1366 / window.innerWidth),\n            transform: `scale(${window.innerWidth / 1366})`,\n          });\n        } else if (ratio > currentRatio) {\n          setWindowSize({\n            width: window.innerWidth * (768 / window.innerHeight),\n            height: 768,\n            transform: `scale(${window.innerHeight / 768})`,\n          });\n        } else {\n          setWindowSize({\n            width: 1366,\n            height: 768,\n            transform: `scale(${window.innerHeight / 768})`,\n          });\n        }\n      }\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n        isMobile: window.innerWidth <= 760,\n        transform: `scale(1)`,\n      });\n    }\n    window.addEventListener(\"resize\", handleResize);\n\n    handleResize();\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowSize;\n}\n","import React from \"react\";\nimport { db, auth, createTimestamp } from \"../firebase\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n\nexport default function useAuthUser() {\n  const [user] = useAuthState(auth);\n\n  React.useEffect(() => {\n    if (user) {\n      const ref = db.collection(\"users\").doc(user.uid);\n      ref.get().then((doc) => {\n        if (!doc.exists) {\n          ref.set({\n            name: user.displayName,\n            photoURL: user.photoURL,\n            timestamp: createTimestamp(),\n          });\n        }\n      });\n    }\n  }, [user]);\n\n  return user;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}