{"version":3,"sources":["firebase.js","components/Login.js","components/AudioPlayer.js","components/ChatMessages.js","components/recordAudio.js","components/ChatFooter.js","components/MediaPreview.js","components/Chat.js","hooks/useChatMessages.js","hooks/useRoom.js","components/SidebarListItem.js","components/SidebarList.js","components/Sidebar.js","hooks/useRooms.js","hooks/useUsers.js","hooks/useChats.js","App.js","hooks/useWindowSize.js","hooks/useAuthUser.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","provider","GoogleAuthProvider","storage","ref","audioStorage","createTimestamp","FieldValue","serverTimestamp","database","ServerValue","TIMESTAMP","Login","className","src","alt","Button","onClick","signInWithRedirect","AudioPlayer","sender","audioUrl","id","setAudioId","audioId","React","useState","isPlaying","setPlaying","isMediaLoaded","setMediaLoaded","isLoaded","setLoaded","isMetadataLoaded","setMetadataLoaded","sliderValue","setSliderValue","duration","setDuration","totalDuration","useRef","audio","Audio","interval","isUploading","formatTime","time","minutes","Math","floor","seconds","updateSlider","current","currentTime","useEffect","load","media","Promise","resolve","onloadedmetadata","Number","MAX_SAFE_INTEGER","ontimeupdate","then","addEventListener","clearInterval","pause","PauseRounded","PlayArrowRounded","play","setInterval","CircularProgress","style","width","type","min","max","value","onChange","event","target","seekTo","ChatMessages","messages","user","roomId","map","message","isSender","uid","name","imageUrl","height","audioName","recordAudio","navigator","mediaDevices","getUserMedia","stream","mediaRecorder","MediaRecorder","audioChunks","push","data","start","stop","uuid","audioFile","File","URL","createObjectURL","ChatFooter","input","sendMessage","image","room","isRecording","setRecording","timerInterval","recordingEl","record","inputRef","a","preventDefault","focus","pad","String","length","stopRecording","opacity","sendAudio","collection","doc","set","photoURL","timestamp","add","displayName","Date","toUTCString","child","put","getDownloadURL","url","update","now","setTime","timeElapsed","totalSeconds","parseInt","startTimer","btnIcons","Send","color","MicRounded","canRecord","window","onKeyPress","placeholder","trim","htmlFor","display","accept","capture","files","CancelRounded","CheckCircleRounded","MediaPreview","closePreview","CloseRounded","Chat","page","setImage","setInput","isDeleting","setDeleting","openMenu","setOpenMenu","setSrc","useParams","history","useHistory","useCollection","orderBy","snapshot","docs","useChatMessages","userId","isUserRoom","includes","replace","useDocument","useRoom","imageName","newMessage","Compressor","quality","maxWidth","success","result","roomRef","get","roomMessages","audioFiles","imageFiles","forEach","all","delete","console","error","isMobile","goBack","IconButton","ArrowBack","Avatar","file","reader","FileReader","readAsDataURL","onload","cursor","AddPhotoAlternate","currentTarget","MoreVert","Menu","anchorEl","open","Boolean","onClose","keepMounted","MenuItem","SidebarListItem","item","to","SidebarList","title","SearchOutlined","CancelOutlined","Sidebar","Nav","rooms","userID","useRooms","users","useUsers","chats","useChats","searchResults","setSearchResults","menu","setMenu","query","elements","search","where","userSnapshot","roomSnapshot","userResults","roomResults","NavLink","props","activeClass","children","minHeight","signOut","ExitToApp","onSubmit","activeClassName","Home","Message","PeopleAlt","path","roomName","prompt","Add","App","undefined","windowSize","setWindowSize","handleResize","innerHeight","innerWidth","currentRatio","ratio","transform","removeEventListener","useWindowSize","useAuthState","exists","useAuthUser","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b3ddd1ee.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/database\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n\tapiKey: \"AIzaSyAiVTVf8SmyZXu-SBPVmgP4l0Wmzkl-leI\",\r\n\tauthDomain: \"whatsapp-clone-53245.firebaseapp.com\",\r\n\tprojectId: \"whatsapp-clone-53245\",\r\n\tstorageBucket: \"whatsapp-clone-53245.appspot.com\",\r\n\tmessagingSenderId: \"542042672013\",\r\n\tappId: \"1:542042672013:web:d9e5fc82ce2d375523cbc4\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebaseApp.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nconst storage = firebase.storage().ref(\"images\");\r\nconst audioStorage = firebase.storage().ref(\"audios\");\r\nconst createTimestamp = firebase.firestore.FieldValue.serverTimestamp;\r\nconst serverTimestamp = firebase.database.ServerValue.TIMESTAMP;\r\n\r\nexport {\r\n\tdb,\r\n\tauth,\r\n\tprovider,\r\n\tstorage,\r\n\taudioStorage,\r\n\tcreateTimestamp,\r\n\tserverTimestamp,\r\n};\r\n","import { Button } from \"@material-ui/core\";\nimport \"./Login.css\";\n\nimport { auth, provider } from \"../firebase\";\n\nexport default function Login() {\n\tfunction login() {\n\t\tauth.signInWithRedirect(provider);\n\t}\n\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<div className=\"login\">\n\t\t\t\t<div className=\"login__container\">\n\t\t\t\t\t<img src=\"./login-logo.png\" alt=\"Logo\" />\n\t\t\t\t\t<div className=\"login__text\">\n\t\t\t\t\t\t<h1>Sign in to Whatsapp</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button onClick={login}>Sign in with Google</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport { PauseRounded, PlayArrowRounded } from \"@material-ui/icons\";\nimport React from \"react\";\nimport \"./AudioPlayer.css\";\n\nexport default function AudioPlayer({\n\tsender,\n\taudioUrl,\n\tid,\n\tsetAudioId,\n\taudioId,\n}) {\n\tconst [isPlaying, setPlaying] = React.useState(false);\n\tconst [isMediaLoaded, setMediaLoaded] = React.useState(false);\n\tconst [isLoaded, setLoaded] = React.useState(false);\n\tconst [isMetadataLoaded, setMetadataLoaded] = React.useState(false);\n\tconst [sliderValue, setSliderValue] = React.useState(0);\n\tconst [duration, setDuration] = React.useState(\"\");\n\n\tconst totalDuration = React.useRef(\"\");\n\tconst audio = React.useRef(new Audio(audioUrl));\n\tconst interval = React.useRef();\n\tconst isUploading = React.useRef(audioUrl === \"uploading\");\n\n\tReact.useEffect(() => {\n\t\tif (isUploading.current && audioUrl !== \"uploading\") {\n\t\t\taudio.current = new Audio(audioUrl);\n\t\t\taudio.current.load();\n\t\t\tsetLoaded(true);\n\t\t} else if (isUploading.current === false) {\n\t\t\tsetLoaded(true);\n\t\t}\n\t}, [audioUrl]);\n\n\tfunction getAudioDuration(media) {\n\t\treturn new Promise((resolve) => {\n\t\t\tmedia.onloadedmetadata = () => {\n\t\t\t\tmedia.currentTime = Number.MAX_SAFE_INTEGER;\n\n\t\t\t\tmedia.ontimeupdate = () => {\n\t\t\t\t\tmedia.ontimeupdate = () => {};\n\t\t\t\t\tmedia.currentTime = 0.1;\n\t\t\t\t\tresolve(media.duration);\n\t\t\t\t};\n\t\t\t};\n\t\t});\n\t}\n\n\tReact.useEffect(() => {\n\t\tif (isLoaded) {\n\t\t\tgetAudioDuration(audio.current).then(() => {\n\t\t\t\tsetMetadataLoaded(true);\n\t\t\t});\n\t\t}\n\t}, [isLoaded]);\n\n\tReact.useEffect(() => {\n\t\tif (isMetadataLoaded) {\n\t\t\taudio.current.addEventListener(\"canplaythrough\", () => {\n\t\t\t\tif (!totalDuration.current) {\n\t\t\t\t\tsetMediaLoaded(true);\n\t\t\t\t\tconst time = formatTime(audio.current.duration);\n\t\t\t\t\ttotalDuration.current = time;\n\t\t\t\t\tsetDuration(totalDuration.current);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\taudio.current.addEventListener(\"ended\", () => {\n\t\t\t\tclearInterval(interval.current);\n\t\t\t\tsetDuration(totalDuration.current);\n\t\t\t\tsetSliderValue(0);\n\t\t\t\tsetPlaying(false);\n\t\t\t});\n\t\t}\n\t}, [isMetadataLoaded]);\n\n\tfunction formatTime(time) {\n\t\tlet minutes = Math.floor(time / 60);\n\t\tlet seconds = Math.floor(time - minutes * 60);\n\n\t\tif (minutes < 10) {\n\t\t\tminutes = `0${minutes}`;\n\t\t}\n\t\tif (seconds < 10) {\n\t\t\tseconds = `0${seconds}`;\n\t\t}\n\n\t\treturn `${minutes}:${seconds}`;\n\t}\n\n\tfunction playAudio() {\n\t\tsetPlaying(true);\n\t\taudio.current.play();\n\t\tif (audioId !== id) {\n\t\t\tsetAudioId(id);\n\t\t}\n\t\tinterval.current = setInterval(updateSlider, 100);\n\t}\n\n\tfunction updateSlider() {\n\t\tlet sliderPosition = 0;\n\n\t\tconst { currentTime, duration } = audio.current;\n\t\tif (typeof duration === \"number\") {\n\t\t\tsliderPosition = currentTime * (100 / duration);\n\t\t\tsetSliderValue(sliderPosition);\n\t\t\tconst time = formatTime(currentTime);\n\t\t\tsetDuration(time);\n\t\t}\n\t}\n\n\tfunction stopAudio() {\n\t\taudio.current.pause();\n\t\tclearInterval(interval.current);\n\t\tsetPlaying(false);\n\t\tsetDuration(totalDuration.current);\n\t}\n\n\tfunction scrubAudio(event) {\n\t\tconst value = event.target.value;\n\t\tconst { duration } = audio.current;\n\n\t\tif (isMediaLoaded) {\n\t\t\tconst seekTo = duration * (value / 100);\n\t\t\taudio.current.currentTime = seekTo;\n\t\t\tsetSliderValue(value);\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\tif (audioId !== id) {\n\t\t\taudio.current.pause();\n\t\t\tsetPlaying(false);\n\t\t}\n\t}, [audioId, id]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className={`audioplayer ${sender ? \"\" : \"audioplayer__alt\"}`}>\n\t\t\t\t{!isMediaLoaded ? (\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t) : isPlaying ? (\n\t\t\t\t\t<PauseRounded onClick={stopAudio} className=\"pause\" />\n\t\t\t\t) : !isPlaying ? (\n\t\t\t\t\t<PlayArrowRounded onClick={playAudio} />\n\t\t\t\t) : null}\n\t\t\t\t<div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{ width: `${sliderValue}%` }}\n\t\t\t\t\t\tclassName=\"audioplayer__slider--played\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\tvalue={sliderValue}\n\t\t\t\t\t\tonChange={scrubAudio}\n\t\t\t\t\t\tclassName=\"audioplayer__slider\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span className=\"chat__timestamp audioplayer__time\">\n\t\t\t\t{duration}\n\t\t\t</span>\n\t\t</>\n\t);\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport AudioPlayer from \"./AudioPlayer\";\n\nexport default function ChatMessages({\n\tmessages,\n\tuser,\n\troomId,\n\taudioId,\n\tsetAudioId,\n}) {\n\tif (!messages) return null;\n\n\treturn messages.map((message) => {\n\t\tconst isSender = message.uid === user.uid;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={message.id}\n\t\t\t\tclassName={`chat__message ${\n\t\t\t\t\tisSender ? \"chat__message--sender\" : \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<span className=\"chat__name\">{message.name}</span>\n\n\t\t\t\t{message.imageUrl === \"uploading\" ? (\n\t\t\t\t\t<div className=\"image-container\">\n\t\t\t\t\t\t<div className=\"image__container--loader\">\n\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth: 40,\n\t\t\t\t\t\t\t\t\theight: 40,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : message.imageUrl ? (\n\t\t\t\t\t<div className=\"image-container\">\n\t\t\t\t\t\t<img src={message.imageUrl} alt={message.name} />\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\n\t\t\t\t{message.audioName ? (\n\t\t\t\t\t<AudioPlayer\n\t\t\t\t\t\tsender={isSender}\n\t\t\t\t\t\troomId={roomId}\n\t\t\t\t\t\tid={message.id}\n\t\t\t\t\t\taudioUrl={message.audioUrl}\n\t\t\t\t\t\taudioId={audioId}\n\t\t\t\t\t\tsetAudioId={setAudioId}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"chat__message--message\">\n\t\t\t\t\t\t{message.message}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\n\t\t\t\t<span className=\"chat__timestamp\">{message.time}</span>\n\t\t\t</div>\n\t\t);\n\t});\n}\n","import { v4 as uuid } from \"uuid\";\n\nexport default function recordAudio() {\n\treturn new Promise((resolve) => {\n\t\tnavigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\n\t\t\tconst mediaRecorder = new MediaRecorder(stream);\n\t\t\tconst audioChunks = [];\n\n\t\t\tmediaRecorder.addEventListener(\"dataavailable\", (event) => {\n\t\t\t\taudioChunks.push(event.data);\n\t\t\t});\n\n\t\t\tfunction start() {\n\t\t\t\tmediaRecorder.start();\n\t\t\t}\n\n\t\t\tfunction stop() {\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tmediaRecorder.addEventListener(\"stop\", () => {\n\t\t\t\t\t\tconst audioName = uuid();\n\t\t\t\t\t\tconst audioFile = new File(audioChunks, audioName, {\n\t\t\t\t\t\t\ttype: \"audio/mpeg\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst audioUrl = URL.createObjectURL(audioFile);\n\t\t\t\t\t\tconst audio = new Audio(audioUrl);\n\t\t\t\t\t\tfunction play() {\n\t\t\t\t\t\t\taudio.play();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve({ audioFile, audioUrl, play, audioName });\n\t\t\t\t\t});\n\n\t\t\t\t\tmediaRecorder.stop();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tresolve({ start, stop });\n\t\t});\n\t});\n}\n","import {\n\tCancelRounded,\n\tCheckCircleRounded,\n\tMicRounded,\n\tSend,\n} from \"@material-ui/icons\";\nimport React from \"react\";\nimport { createTimestamp, db, audioStorage } from \"../firebase\";\nimport { v4 as uuid } from \"uuid\";\nimport \"./ChatFooter.css\";\nimport recordAudio from \"./recordAudio\";\n\nexport default function ChatFooter({\n\tinput,\n\tonChange,\n\tsendMessage,\n\timage,\n\tuser,\n\troom,\n\troomId,\n\tsetAudioId,\n}) {\n\tconst [isRecording, setRecording] = React.useState(false);\n\tconst [duration, setDuration] = React.useState(\"00:00\");\n\n\tconst timerInterval = React.useRef();\n\tconst recordingEl = React.useRef();\n\tconst record = React.useRef();\n\tconst inputRef = React.useRef();\n\n\tasync function startRecording(event) {\n\t\tevent.preventDefault();\n\t\trecord.current = await recordAudio();\n\t\tinputRef.current.focus();\n\t\tinputRef.current.style.width = \"calc(100% - 56px)\";\n\t\tsetRecording(true);\n\t\tsetAudioId(\"\");\n\t}\n\n\tReact.useEffect(() => {\n\t\tif (isRecording) {\n\t\t\trecordingEl.current.style.opacity = \"1\";\n\t\t\tstartTimer();\n\t\t\trecord.current.start();\n\t\t}\n\n\t\tfunction startTimer() {\n\t\t\tconst start = Date.now();\n\t\t\ttimerInterval.current = setInterval(setTime, 100);\n\n\t\t\tfunction setTime() {\n\t\t\t\tconst timeElapsed = Date.now() - start;\n\t\t\t\tconst totalSeconds = Math.floor(timeElapsed / 1000);\n\t\t\t\tconst minutes = pad(parseInt(totalSeconds / 60));\n\t\t\t\tconst seconds = pad(parseInt(totalSeconds % 60));\n\t\t\t\tconst duration = `${minutes}:${seconds}`;\n\t\t\t\tsetDuration(duration);\n\t\t\t}\n\t\t}\n\t}, [isRecording]);\n\n\tfunction pad(value) {\n\t\treturn String(value).length < 2 ? `0${value}` : value;\n\t}\n\n\tasync function stopRecording() {\n\t\tinputRef.current.focus();\n\t\tclearInterval(timerInterval.current);\n\t\tconst audio = record.current.stop();\n\t\trecordingEl.current.style.opacity = \"0\";\n\t\tsetRecording(false);\n\t\tinputRef.current.style.width = \"calc(100% - 112px)\";\n\t\tsetDuration(\"00:00\");\n\t\treturn audio;\n\t}\n\n\tasync function finishRecording() {\n\t\tconst audio = await stopRecording();\n\t\tconst { audioFile, audioName } = await audio;\n\t\tsendAudio(audioFile, audioName);\n\t}\n\n\tasync function sendAudio(audioFile, audioName) {\n\t\tdb.collection(\"users\")\n\t\t\t.doc(user.uid)\n\t\t\t.collection(\"chats\")\n\t\t\t.doc(roomId)\n\t\t\t.set({\n\t\t\t\tname: room.name,\n\t\t\t\tphotoURL: room.photoURL || null,\n\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t});\n\n\t\tconst doc = await db\n\t\t\t.collection(\"rooms\")\n\t\t\t.doc(roomId)\n\t\t\t.collection(\"messages\")\n\t\t\t.add({\n\t\t\t\tname: user.displayName,\n\t\t\t\tuid: user.uid,\n\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t\ttime: new Date().toUTCString(),\n\t\t\t\taudioUrl: \"uploading\",\n\t\t\t\taudioName,\n\t\t\t});\n\n\t\tawait audioStorage.child(audioName).put(audioFile);\n\t\tconst url = await audioStorage.child(audioName).getDownloadURL();\n\t\tdb.collection(\"rooms\")\n\t\t\t.doc(roomId)\n\t\t\t.collection(\"messages\")\n\t\t\t.doc(doc.id)\n\t\t\t.update({\n\t\t\t\taudioUrl: url,\n\t\t\t});\n\t}\n\n\tfunction audioInputChange(event) {\n\t\tconst audioFile = event.target.files[0];\n\n\t\tif (audioFile) {\n\t\t\tsetAudioId(\"\");\n\t\t\tsendAudio(audioFile, uuid());\n\t\t}\n\t}\n\n\tconst btnIcons = (\n\t\t<>\n\t\t\t<Send\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: 20,\n\t\t\t\t\theight: 20,\n\t\t\t\t\tcolor: \"white\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<MicRounded\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: 24,\n\t\t\t\t\theight: 24,\n\t\t\t\t\tcolor: \"white\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n\n\tconst canRecord =\n\t\tnavigator.mediaDevices.getUserMedia && window.MediaRecorder;\n\n\treturn (\n\t\t<div className=\"chat__footer\">\n\t\t\t<form>\n\t\t\t\t<input\n\t\t\t\t\tref={inputRef}\n\t\t\t\t\tvalue={input}\n\t\t\t\t\tonChange={!isRecording ? onChange : null}\n\t\t\t\t\tonKeyPress={isRecording ? () => false : null}\n\t\t\t\t\tplaceholder=\"Type a message\"\n\t\t\t\t/>\n\n\t\t\t\t{canRecord ? (\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\tinput.trim() || (input === \"\" && image)\n\t\t\t\t\t\t\t\t? sendMessage\n\t\t\t\t\t\t\t\t: startRecording\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"send__btn\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{btnIcons}\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<label htmlFor=\"capture\" className=\"send__btn\">\n\t\t\t\t\t\t\t{btnIcons}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tid=\"capture\"\n\t\t\t\t\t\t\taccept=\"audio/*\"\n\t\t\t\t\t\t\tcapture\n\t\t\t\t\t\t\tonChange={audioInputChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</form>\n\n\t\t\t{isRecording && (\n\t\t\t\t<div ref={recordingEl} className=\"record\">\n\t\t\t\t\t<CancelRounded\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: 30,\n\t\t\t\t\t\t\theight: 30,\n\t\t\t\t\t\t\tcolor: \"#f20519\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={stopRecording}\n\t\t\t\t\t/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"record__redcircle\" />\n\t\t\t\t\t\t<div className=\"record__duration\">{duration}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<CheckCircleRounded\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: 30,\n\t\t\t\t\t\t\theight: 30,\n\t\t\t\t\t\t\tcolor: \"#41bf49\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={finishRecording}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { CloseRounded } from \"@material-ui/icons\";\nimport \"./MediaPreview.css\";\n\nexport default function MediaPreview({ src, closePreview }) {\n\tif (!src) return null;\n\treturn (\n\t\t<div className=\"mediaPreview\">\n\t\t\t<CloseRounded onClick={closePreview} />\n\t\t\t<img src={src} alt=\"Preview\" />\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport \"./Chat.css\";\nimport useRoom from \"../hooks/useRoom\";\nimport ChatMessages from \"./ChatMessages\";\nimport ChatFooter from \"./ChatFooter\";\nimport MediaPreview from \"./MediaPreview\";\nimport Compressor from \"compressorjs\";\nimport {\n\tAvatar,\n\tCircularProgress,\n\tIconButton,\n\tMenu,\n\tMenuItem,\n} from \"@material-ui/core\";\nimport { AddPhotoAlternate, ArrowBack, MoreVert } from \"@material-ui/icons\";\nimport { v4 as uuid } from \"uuid\";\nimport { audioStorage, createTimestamp, db, storage } from \"../firebase\";\nimport useChatMessages from \"../hooks/useChatMessages\";\n\nexport default function Chat({ user, page }) {\n\tconst [image, setImage] = React.useState(null);\n\tconst [input, setInput] = React.useState(\"\");\n\tconst [isDeleting, setDeleting] = React.useState(false);\n\tconst [openMenu, setOpenMenu] = React.useState(null);\n\tconst [src, setSrc] = React.useState(\"\");\n\tconst [audioId, setAudioId] = React.useState(\"\");\n\n\tconst { roomId } = useParams();\n\tconst history = useHistory();\n\tconst messages = useChatMessages(roomId);\n\tconst room = useRoom(roomId, user.uid);\n\n\tfunction onChange(event) {\n\t\tsetInput(event.target.value);\n\t}\n\n\tasync function sendMessage(event) {\n\t\tevent.preventDefault();\n\n\t\tif (input.trim() || (input === \"\" && image)) {\n\t\t\tsetInput(\"\");\n\t\t\tif (image) {\n\t\t\t\tclosePreview();\n\t\t\t}\n\t\t\tconst imageName = uuid();\n\t\t\tconst newMessage = image\n\t\t\t\t? {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\tmessage: input,\n\t\t\t\t\t\tuid: user.uid,\n\t\t\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t\t\t\ttime: new Date().toUTCString(),\n\t\t\t\t\t\timageUrl: \"uploading\",\n\t\t\t\t\t\timageName,\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\tmessage: input,\n\t\t\t\t\t\tuid: user.uid,\n\t\t\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t\t\t\ttime: new Date().toUTCString(),\n\t\t\t\t  };\n\n\t\t\tdb.collection(\"users\")\n\t\t\t\t.doc(user.uid)\n\t\t\t\t.collection(\"chats\")\n\t\t\t\t.doc(roomId)\n\t\t\t\t.set({\n\t\t\t\t\tname: room.name,\n\t\t\t\t\tphotoURL: room.photoURL || null,\n\t\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t\t});\n\n\t\t\tconst doc = await db\n\t\t\t\t.collection(\"rooms\")\n\t\t\t\t.doc(roomId)\n\t\t\t\t.collection(\"messages\")\n\t\t\t\t.add(newMessage);\n\n\t\t\tif (image) {\n\t\t\t\tnew Compressor(image, {\n\t\t\t\t\tquality: 0.8,\n\t\t\t\t\tmaxWidth: 1920,\n\t\t\t\t\tasync success(result) {\n\t\t\t\t\t\tsetSrc(\"\");\n\t\t\t\t\t\tsetImage(null);\n\t\t\t\t\t\tawait storage.child(imageName).put(result);\n\t\t\t\t\t\tconst url = await storage\n\t\t\t\t\t\t\t.child(imageName)\n\t\t\t\t\t\t\t.getDownloadURL();\n\t\t\t\t\t\tdb.collection(\"rooms\")\n\t\t\t\t\t\t\t.doc(roomId)\n\t\t\t\t\t\t\t.collection(\"messages\")\n\t\t\t\t\t\t\t.doc(doc.id)\n\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\timageUrl: url,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction showPreview(event) {\n\t\tconst file = event.target.files[0];\n\n\t\tif (file) {\n\t\t\tsetImage(file);\n\t\t\tconst reader = new FileReader();\n\t\t\treader.readAsDataURL(file);\n\t\t\treader.onload = () => {\n\t\t\t\tsetSrc(reader.result);\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction closePreview() {\n\t\tsetSrc(\"\");\n\t\tsetImage(null);\n\t}\n\n\tasync function deleteRoom() {\n\t\tsetOpenMenu(false);\n\t\tsetDeleting(true);\n\n\t\ttry {\n\t\t\tconst roomRef = db.collection(\"rooms\").doc(roomId);\n\t\t\tconst roomMessages = await roomRef.collection(\"messages\").get();\n\t\t\tconst audioFiles = [];\n\t\t\tconst imageFiles = [];\n\t\t\troomMessages.docs.forEach((doc) => {\n\t\t\t\tif (doc.data().audioName) {\n\t\t\t\t\taudioFiles.push(doc.data().audioName);\n\t\t\t\t} else if (doc.data().imageName) {\n\t\t\t\t\timageFiles.push(doc.data().imageName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tawait Promise.all([\n\t\t\t\t...roomMessages.docs.map((doc) => doc.ref.delete()),\n\t\t\t\t...imageFiles.map((image) => storage.child(image).delete()),\n\t\t\t\t...audioFiles.map((audio) =>\n\t\t\t\t\taudioStorage.child(audio).delete()\n\t\t\t\t),\n\t\t\t\tdb\n\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t.doc(user.uid)\n\t\t\t\t\t.collection(\"chats\")\n\t\t\t\t\t.doc(roomId)\n\t\t\t\t\t.delete(),\n\t\t\t\troomRef.delete(),\n\t\t\t]);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error deleting room: \", error.message);\n\t\t} finally {\n\t\t\tsetDeleting(false);\n\t\t\tpage.isMobile ? history.goBack() : history.replace(\"/chats\");\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"chat\">\n\t\t\t<div style={{ height: page.height }} className=\"chat__background\" />\n\n\t\t\t<div className=\"chat__header\">\n\t\t\t\t{page.isMobile && (\n\t\t\t\t\t<IconButton onClick={history.goBack}>\n\t\t\t\t\t\t<ArrowBack />\n\t\t\t\t\t</IconButton>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"avatar__container\">\n\t\t\t\t\t<Avatar src={room?.photoURL} />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"chat__header--info\">\n\t\t\t\t\t<h3 style={{ width: page.isMobile && page.width - 165 }}>\n\t\t\t\t\t\t{room?.name}\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"chat__header--right\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"image\"\n\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tonChange={showPreview}\n\t\t\t\t\t/>\n\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\", height: 24 }}\n\t\t\t\t\t\t\thtmlFor=\"image\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AddPhotoAlternate />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={(event) => setOpenMenu(event.currentTarget)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MoreVert />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"menu\"\n\t\t\t\t\t\tanchorEl={openMenu}\n\t\t\t\t\t\topen={Boolean(openMenu)}\n\t\t\t\t\t\tonClose={() => setOpenMenu(null)}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuItem onClick={deleteRoom}>Delete Room</MenuItem>\n\t\t\t\t\t</Menu>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"chat__body--container\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"chat__body\"\n\t\t\t\t\tstyle={{ height: page.height - 68 }}\n\t\t\t\t>\n\t\t\t\t\t<ChatMessages\n\t\t\t\t\t\tmessages={messages}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\troomId={roomId}\n\t\t\t\t\t\taudioId={audioId}\n\t\t\t\t\t\tsetAudioId={setAudioId}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<MediaPreview src={src} closePreview={closePreview} />\n\n\t\t\t<ChatFooter\n\t\t\t\tinput={input}\n\t\t\t\tonChange={onChange}\n\t\t\t\tsendMessage={sendMessage}\n\t\t\t\timage={image}\n\t\t\t\tuser={user}\n\t\t\t\troom={room}\n\t\t\t\troomId={roomId}\n\t\t\t\tsetAudioId={setAudioId}\n\t\t\t/>\n\n\t\t\t{isDeleting && (\n\t\t\t\t<div className=\"chat__deleting\">\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useChatMessages(roomId) {\n\tconst [snapshot] = useCollection(\n\t\troomId\n\t\t\t? db\n\t\t\t\t\t.collection(\"rooms\")\n\t\t\t\t\t.doc(roomId)\n\t\t\t\t\t.collection(\"messages\")\n\t\t\t\t\t.orderBy(\"timestamp\", \"asc\")\n\t\t\t: null\n\t);\n\n\tconst messages = snapshot?.docs.map((doc) => ({\n\t\tid: doc.id,\n\t\t...doc.data(),\n\t}));\n\n\treturn messages;\n}\n","import { useDocument } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useRoom(roomId, userId) {\n\tconst isUserRoom = roomId.includes(userId);\n\n\tconst doc = isUserRoom ? roomId?.replace(userId, \"\") : roomId;\n\n\tconst [snapshot] = useDocument(\n\t\tdb.collection(isUserRoom ? \"rooms\" : \"users\").doc(doc)\n\t);\n\n\tif (!snapshot) return null;\n\n\treturn {\n\t\tid: snapshot.id,\n\t\tphotoURL:\n\t\t\tsnapshot.photoURL ||\n\t\t\t`https://avatars.dicebear.com/api/human/${snapshot.id}.svg`,\n\t\t...snapshot.data(),\n\t};\n}\n","import { Link } from \"react-router-dom\";\nimport { Avatar } from \"@material-ui/core\";\n\nexport default function SidebarListItem({ item }) {\n\treturn (\n\t\t<Link className=\"link\" to={`/room/${item.id}`}>\n\t\t\t<div className=\"sidebar__chat\">\n\t\t\t\t<div className=\"avatar__container\">\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: 45,\n\t\t\t\t\t\t\theight: 45,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\titem.photoURL ||\n\t\t\t\t\t\t\t`https://avatars.dicebear.com/api/human/${item.id}.svg`\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sidebar__chat--info\">\n\t\t\t\t\t<h2>{item.name}</h2>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Link>\n\t);\n}\n","import \"./SidebarList.css\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { SearchOutlined, CancelOutlined } from \"@material-ui/icons\";\nimport SidebarListItem from \"./SidebarListItem\";\n\nexport default function SidebarList({ title, data }) {\n\tif (!data) {\n\t\treturn (\n\t\t\t<div className=\"loader__container sidebar__loader\">\n\t\t\t\t<CircularProgress />\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (!data.length && title === \"Search Results\") {\n\t\treturn (\n\t\t\t<div className=\"no-result\">\n\t\t\t\t<div>\n\t\t\t\t\t<SearchOutlined />\n\t\t\t\t\t<div className=\"cancel-root\">\n\t\t\t\t\t\t<CancelOutlined />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<h2>No {title}</h2>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn (\n\t\t<div className=\"sidebar__chat--container\">\n\t\t\t<h2>{title}</h2>\n\t\t\t{data.map((item) => (\n\t\t\t\t<SidebarListItem key={item.id} item={item} />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport { Avatar, IconButton } from \"@material-ui/core\";\nimport {\n\tAdd,\n\tExitToApp,\n\tHome,\n\tMessage,\n\tPeopleAlt,\n\tSearchOutlined,\n} from \"@material-ui/icons\";\nimport { auth, createTimestamp, db } from \"../firebase\";\nimport \"./Sidebar.css\";\nimport { NavLink, Switch, Route } from \"react-router-dom\";\nimport SidebarList from \"./SidebarList\";\nimport useRooms from \"../hooks/useRooms\";\nimport useUsers from \"../hooks/useUsers\";\nimport useChats from \"../hooks/useChats\";\n\nexport default function Sidebar({ user, page }) {\n\tconst rooms = useRooms();\n\tconst users = useUsers(user);\n\tconst chats = useChats(user);\n\n\tconst [searchResults, setSearchResults] = React.useState([]);\n\tconst [menu, setMenu] = React.useState(1);\n\n\tfunction signOut() {\n\t\tauth.signOut();\n\t}\n\n\tfunction createRoom() {\n\t\tconst roomName = prompt(\"Type the name of your Room\");\n\t\tif (roomName?.trim()) {\n\t\t\tdb.collection(\"rooms\").add({\n\t\t\t\tname: roomName,\n\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function searchUsersAndRooms(event) {\n\t\tevent.preventDefault();\n\t\tconst query = event.target.elements.search.value;\n\t\tconst userSnapshot = await db\n\t\t\t.collection(\"users\")\n\t\t\t.where(\"name\", \"==\", query)\n\t\t\t.get();\n\n\t\tconst roomSnapshot = await db\n\t\t\t.collection(\"rooms\")\n\t\t\t.where(\"name\", \"==\", query)\n\t\t\t.get();\n\n\t\tconst userResults = userSnapshot.docs.map((doc) => ({\n\t\t\tid: doc.id,\n\t\t\t...doc.data(),\n\t\t}));\n\t\tconst roomResults = roomSnapshot.docs.map((doc) => ({\n\t\t\tid: doc.id,\n\t\t\t...doc.data(),\n\t\t}));\n\n\t\tconst searchResults = [...userResults, ...roomResults];\n\t\tsetMenu(4);\n\t\tsetSearchResults(searchResults);\n\t}\n\n\tlet Nav;\n\tif (page.isMobile) {\n\t\tNav = NavLink;\n\t} else {\n\t\tNav = (props) => (\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\tprops.activeClass ? \"sidebar__menu--selected\" : \"\"\n\t\t\t\t}`}\n\t\t\t\tonClick={props.onClick}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"sidebar\"\n\t\t\tstyle={{ minHeight: page.isMobile ? page.height : \"auto\" }}\n\t\t>\n\t\t\t<div className=\"sidebar__header\">\n\t\t\t\t<div className=\"sidebar__header--left\">\n\t\t\t\t\t<Avatar src={user?.photoURL} />\n\t\t\t\t\t<h4>{user?.displayName}</h4>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sidebar__header--right\">\n\t\t\t\t\t<IconButton onClick={signOut}>\n\t\t\t\t\t\t<ExitToApp />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"sidebar__search\">\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={searchUsersAndRooms}\n\t\t\t\t\tclassName=\"sidebar__search--container\"\n\t\t\t\t>\n\t\t\t\t\t<SearchOutlined />\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Search for users or rooms\"\n\t\t\t\t\t\tid=\"search\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t<div className=\"sidebar__menu\">\n\t\t\t\t<Nav\n\t\t\t\t\tto=\"/chats\"\n\t\t\t\t\tactiveClassName=\"sidebar__menu--selected\"\n\t\t\t\t\tonClick={() => setMenu(1)}\n\t\t\t\t\tactiveClass={menu === 1}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sidebar__menu--home\">\n\t\t\t\t\t\t<Home />\n\t\t\t\t\t\t<div className=\"sidebar__menu--line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</Nav>\n\n\t\t\t\t<Nav\n\t\t\t\t\tto=\"/rooms\"\n\t\t\t\t\tactiveClassName=\"sidebar__menu--selected\"\n\t\t\t\t\tonClick={() => setMenu(2)}\n\t\t\t\t\tactiveClass={menu === 2}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sidebar__menu--rooms\">\n\t\t\t\t\t\t<Message />\n\t\t\t\t\t\t<div className=\"sidebar__menu--line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</Nav>\n\n\t\t\t\t<Nav\n\t\t\t\t\tto=\"/users\"\n\t\t\t\t\tactiveClassName=\"sidebar__menu--selected\"\n\t\t\t\t\tonClick={() => setMenu(3)}\n\t\t\t\t\tactiveClass={menu === 3}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sidebar__menu--users\">\n\t\t\t\t\t\t<PeopleAlt />\n\t\t\t\t\t\t<div className=\"sidebar__menu--line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</Nav>\n\t\t\t</div>\n\n\t\t\t{page.isMobile ? (\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/chats\">\n\t\t\t\t\t\t<SidebarList title=\"Chats\" data={chats} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/rooms\">\n\t\t\t\t\t\t<SidebarList title=\"Rooms\" data={rooms} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/users\">\n\t\t\t\t\t\t<SidebarList title=\"Users\" data={users} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/search\">\n\t\t\t\t\t\t<SidebarList\n\t\t\t\t\t\t\ttitle=\"Search Results\"\n\t\t\t\t\t\t\tdata={searchResults}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t) : menu === 1 ? (\n\t\t\t\t<SidebarList title=\"Chats\" data={chats} />\n\t\t\t) : menu === 2 ? (\n\t\t\t\t<SidebarList title=\"Rooms\" data={rooms} />\n\t\t\t) : menu === 3 ? (\n\t\t\t\t<SidebarList title=\"Users\" data={users} />\n\t\t\t) : menu === 4 ? (\n\t\t\t\t<SidebarList title=\"Search Results\" data={searchResults} />\n\t\t\t) : null}\n\n\t\t\t<div className=\"sidebar__chat--addRoom\">\n\t\t\t\t<IconButton onClick={createRoom}>\n\t\t\t\t\t<Add />\n\t\t\t\t</IconButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useRooms() {\n\tconst [snapshot] = useCollection(\n\t\tdb.collection(\"rooms\").orderBy(\"timestamp\", \"desc\")\n\t);\n\n\tconst rooms = snapshot?.docs.map((doc) => ({\n\t\tid: doc.id,\n\t\tuserID: doc.id,\n\t\t...doc.data(),\n\t}));\n\n\treturn rooms;\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useUsers(user) {\n\tconst [snapshot] = useCollection(\n\t\tdb.collection(\"users\").orderBy(\"timestamp\", \"desc\")\n\t);\n\n\tconst users = [];\n\n\tif (user) {\n\t\tsnapshot?.docs.forEach((doc) => {\n\t\t\tconst id =\n\t\t\t\tdoc.id > user.uid\n\t\t\t\t\t? `${doc.id}#{user.uid}`\n\t\t\t\t\t: `${user.uid}${doc.id}`;\n\t\t\tif (doc.id !== user.uid) {\n\t\t\t\tusers.push({\n\t\t\t\t\tid,\n\t\t\t\t\tuserID: doc.id,\n\t\t\t\t\t...doc.data(),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn users;\n}\n","import { useCollection } from \"react-firebase-hooks/firestore\";\nimport { db } from \"../firebase\";\n\nexport default function useChats(user) {\n\tconst [snapshot] = useCollection(\n\t\tuser\n\t\t\t? db\n\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t.doc(user.uid)\n\t\t\t\t\t.collection(\"chats\")\n\t\t\t\t\t.orderBy(\"timestamp\", \"desc\")\n\t\t\t: null\n\t);\n\n\tconst chats = snapshot?.docs.map((doc) => ({\n\t\tid: doc.id,\n\t\t...doc.data(),\n\t}));\n\n\treturn chats;\n}\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport Login from \"./components/Login\";\r\nimport Chat from \"./components/Chat\";\r\nimport useAuthUser from \"./hooks/useAuthUser\";\r\nimport useWindowSize from \"./hooks/useWindowSize\";\r\nimport Sidebar from \"./components/Sidebar.js\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nexport default function App() {\r\n\tconst page = useWindowSize();\r\n\tconst user = useAuthUser();\r\n\r\n\tif (!user) {\r\n\t\treturn <Login />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"app\" style={{ ...page }}>\r\n\t\t\t<Redirect to={page.isMobile ? \"/chats\" : \"/\"} />\r\n\t\t\t<div className=\"app__body\">\r\n\t\t\t\t<Sidebar user={user} page={page} />\r\n\t\t\t\t<Route path=\"/room/:roomId\">\r\n\t\t\t\t\t<Chat user={user} page={page} />\r\n\t\t\t\t</Route>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = React.useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  React.useEffect(() => {\n    function handleResize() {\n      if (window.innerHeight > 768 && window.innerWidth > 1366) {\n        const currentRatio = window.innerHeight / window.innerWidth;\n        const ratio = 768 / 1366;\n        if (ratio < currentRatio) {\n          setWindowSize({\n            width: 1366,\n            height: window.innerHeight * (1366 / window.innerWidth),\n            transform: `scale(${window.innerWidth / 1366})`,\n          });\n        } else if (ratio > currentRatio) {\n          setWindowSize({\n            width: window.innerWidth * (768 / window.innerHeight),\n            height: 768,\n            transform: `scale(${window.innerHeight / 768})`,\n          });\n        } else {\n          setWindowSize({\n            width: 1366,\n            height: 768,\n            transform: `scale(${window.innerHeight / 768})`,\n          });\n        }\n      }\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n        isMobile: window.innerWidth <= 760,\n        transform: `scale(1)`,\n      });\n    }\n    window.addEventListener(\"resize\", handleResize);\n\n    handleResize();\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowSize;\n}\n","import React from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { db, auth, createTimestamp } from \"../firebase\";\n\nexport default function useAuthUser() {\n\tconst [user] = useAuthState(auth);\n\n\tReact.useEffect(() => {\n\t\tif (user) {\n\t\t\tconst ref = db.collection(\"users\").doc(user.uid);\n\t\t\tref.get().then((doc) => {\n\t\t\t\tif (!doc.exists) {\n\t\t\t\t\tref.set({\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\tphotoURL: user.photoURL,\n\t\t\t\t\t\ttimestamp: createTimestamp(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [user]);\n\n\treturn user;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Router>\n\t\t\t<App />\n\t\t</Router>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}